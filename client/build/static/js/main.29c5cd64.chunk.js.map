{"version":3,"sources":["components/Chat/index.js","components/IconButton/index.js","components/Input/index.js","components/InfoBar/index.js","components/Message/index.js","components/Messages/index.js","util/FileProcessor.js","components/Box/index.js","components/Join/index.js","util/auth.js","components/Login/index.js","components/Signup/index.js","components/Home/index.js","components/Head/index.js","components/PrivateRoute/index.js","components/AuthButton/index.js","App.js","index.js"],"names":["socket","IconButton","onHandleClick","className","name","disabled","icon","iconName","htmlFor","type","id","accept","onChange","e","files","Array","from","target","formData","FormData","append","get","Input","message","setMessage","sendMessage","sendFile","uploadFile","placeholder","value","event","onKeyPress","key","size","onClick","console","log","color","React","memo","room","counts","to","Message","user","text","upload","address","avatarSrc","isSentByCurrentUser","trimmedName","trim","toLowerCase","role","title","src","roundedCircle","dangerouslySetInnerHTML","__html","controls","ReactEmoji","emojify","renderFile","messages","map","index","FileProcessor","file","callback","this","stream","ss","createStream","emit","createBlobReadStream","pipe","config","quality","convertToDataUrl","then","readerData","base64","minifiedDataURL","minifiedBase64","dataURLtoFile","minifiedFile","Promise","resolve","reader","FileReader","readAsDataURL","onload","result","onloadend","img","Image","resizedHeight","width","height","canvas","document","createElement","ctx","getContext","anw","createAttribute","nodeValue","anh","setAttributeNode","drawImage","toDataURL","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","File","Chat","search","useLocation","useState","setName","setRoom","setMessages","setCounts","ENDPOINT","useEffect","qs","parse","io","error","alert","off","on","users","preventDefault","process","minifiedFileProcessor","send","originalFileProcessor","Box","content","control","hasNotification","notificationContent","portalDom","node","getElementById","Toast","delay","autohide","Header","Body","defaultProps","setHasNotification","Join","Form","Group","controlId","Label","Control","Button","block","API_URL","username","password","axios","post","response","data","accessToken","localStorage","setItem","JSON","stringify","removeItem","email","getItem","Login","props","redirectToReferrer","setRedirectToReferrer","setUsername","setPassword","hasError","setHasError","AuthService","login","catch","variant","Signup","setEmail","hasSignup","setHasSignup","Text","roles","Home","getCurrentUser","Head","children","PrivateRoute","Component","component","rest","render","pathname","state","location","AuthButton","withRouter","history","logout","push","App","path","exact","ReactDom","querySelector"],"mappings":"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","file":"static/js/main.29c5cd64.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport qs from 'query-string';\r\nimport io from 'socket.io-client';\r\n// import { Container } from 'react-bootstrap';\r\nimport Input from '../Input';\r\nimport InfoBar from '../InfoBar';\r\nimport Messages from '../Messages';\r\nimport FileProcessor from '../../util/FileProcessor';\r\n\r\nlet socket;\r\n\r\nconst Chat = () => {\r\n  let { search } = useLocation();\r\n  const [name, setName] = useState('');\r\n  const [room, setRoom] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n  const [counts, setCounts] = useState(0);\r\n  // const ENDPOINT = 'localhost:5000';\r\n\r\n  const ENDPOINT = 'https://freshtalk.herokuapp.com';\r\n\r\n  useEffect(() => {\r\n    const { name, room } = qs.parse(search);\r\n    socket = io(ENDPOINT);\r\n    setName(name);\r\n    setRoom(room);\r\n\r\n    socket.emit('join', { name, room }, (error) => {\r\n      if (error) {\r\n        alert(error);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.emit('disconnect');\r\n      socket.off();\r\n    };\r\n  }, [ENDPOINT, search]);\r\n\r\n  useEffect(() => {\r\n    // message 包含user, text\r\n    socket.on('message', (message) => {\r\n      setMessages((messages) => [...messages, message]);\r\n    });\r\n    socket.on('file', ({ user, upload, type }) => {\r\n      if (upload) {\r\n        setMessages((messages) => [...messages, { user, upload, type }]);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // message 包含user, text\r\n    socket.on('roomData', ({ users }) => {\r\n      setCounts(users.length);\r\n    });\r\n  }, [counts]);\r\n\r\n  const sendMessage = (event) => {\r\n    event.preventDefault();\r\n    if (message) {\r\n      socket.emit('sendMessage', message, () => setMessage(''));\r\n    }\r\n  };\r\n\r\n  const sendFile = (file) => {\r\n    /* build => 非同步promise處裡檔案 */\r\n    FileProcessor.process(file, socket).then((minifiedFileProcessor) => {\r\n      minifiedFileProcessor.send();\r\n    });\r\n  };\r\n\r\n  const uploadFile = (file) => {\r\n    FileProcessor.process(file, socket).then((originalFileProcessor) => {\r\n      originalFileProcessor.upload();\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <InfoBar room={room} counts={counts} />\r\n      <Messages messages={messages} name={name} />\r\n      <Input\r\n        message={message}\r\n        setMessage={setMessage}\r\n        sendMessage={sendMessage}\r\n        sendFile={sendFile}\r\n        uploadFile={uploadFile}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import React from 'react';\r\nimport './index.scss';\r\n\r\n//USER送發訊息的人，name該聊天室使用者名字\r\nconst IconButton = ({ onHandleClick, className, name, disabled, icon }) => {\r\n  const onChange = (e) => {\r\n    // lastModified: 1598938657151\r\n    // lastModifiedDate: Tue Sep 01 2020 13:37:37 GMT+0800 (Taipei Standard Time) {}\r\n    // name: \"sing.mp4\"\r\n    // size: 11620208\r\n    // type: \"video/mp4\"\r\n    // webkitRelativePath: \"\"\r\n    const files = Array.from(e.target.files);\r\n    let formData = new FormData();\r\n    formData.append(0, files[0]);\r\n    onHandleClick(formData.get(0));\r\n  };\r\n  const iconName = `icon-${name}`;\r\n  return (\r\n    <span className={`chat__icon ${className} ${disabled ? 'disabled' : ''}`}>\r\n      <label className=\"chat__label\" htmlFor={iconName}>\r\n        {icon && icon}\r\n      </label>\r\n      <input\r\n        className=\"hidden-input\"\r\n        type=\"file\"\r\n        name={iconName}\r\n        id={iconName}\r\n        accept=\"image/*,video/*,audio/*\"\r\n        onChange={onChange}\r\n      />\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default IconButton;\r\n","import React from 'react';\r\n// import { Row, Col, Button } from 'react-bootstrap';\r\nimport { ChatTextFill, CloudUploadFill, Image } from 'react-bootstrap-icons';\r\nimport IconButton from '../IconButton';\r\nimport './index.scss';\r\n\r\nconst Input = ({ message, setMessage, sendMessage, sendFile, uploadFile }) => {\r\n  const handleSendMessage = (event) => {\r\n    console.log('dddd', event.target.value);\r\n    sendMessage(event);\r\n  };\r\n  return (\r\n    <form className=\"chat__form\">\r\n      <textarea\r\n        className=\"chat__message\"\r\n        placeholder=\"write some message...\"\r\n        value={message}\r\n        onChange={(event) => setMessage(event.target.value)}\r\n        onKeyPress={(event) =>\r\n          event.key === 'Enter' ? setMessage(event.target.value) : null\r\n        }\r\n      />\r\n      <div className=\"chat__controls\">\r\n        <IconButton\r\n          disabled={message}\r\n          className=\"chat__flex\"\r\n          type=\"file\"\r\n          onHandleClick={sendFile}\r\n          icon={<Image />}\r\n          name=\"files\"\r\n        />\r\n        <IconButton\r\n          disabled={message}\r\n          className=\"chat__flex\"\r\n          type=\"file\"\r\n          onHandleClick={uploadFile}\r\n          icon={<CloudUploadFill />}\r\n          name=\"upload\"\r\n        />\r\n        <ChatTextFill\r\n          className=\"chat__flex\"\r\n          size=\"32\"\r\n          onClick={message ? handleSendMessage : null}\r\n          color={message ? 'darkslategray' : '#e3e3e3'}\r\n        />\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\nexport default Input;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n// import { Row, Col } from 'react-bootstrap';\r\nimport { ArrowLeftCircle, PeopleFill } from 'react-bootstrap-icons';\r\nimport './index.scss';\r\n\r\nconst InfoBar = ({ room, counts }) => (\r\n  <div className=\"chat__infoBar\">\r\n    <div className=\"chat__room\">\r\n      <h3>{room}</h3>\r\n    </div>\r\n    <div className=\"chat__count\">\r\n      {counts} <PeopleFill color=\"#ffffff\" size={24} />\r\n    </div>\r\n    <div className=\"chat__back\">\r\n      <Link to=\"/\">\r\n        <ArrowLeftCircle color=\"white\" size={24} />\r\n      </Link>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default React.memo(InfoBar);\r\n","import React from 'react';\r\nimport { Image } from 'react-bootstrap';\r\nimport { PersonCircle } from 'react-bootstrap-icons';\r\nimport ReactEmoji from 'react-emoji';\r\nimport './index.scss';\r\n\r\n//USER送發訊息的人，name該聊天室使用者名字\r\nconst Message = ({\r\n  message: { user, text, upload, type, address },\r\n  name,\r\n  avatarSrc,\r\n}) => {\r\n  let isSentByCurrentUser = false;\r\n  const trimmedName = name.trim().toLowerCase();\r\n  if (trimmedName === user) isSentByCurrentUser = true;\r\n  const role = isSentByCurrentUser ? 'user' : 'friend';\r\n  const title = role === 'user' ? trimmedName : user;\r\n  // console.log('葬載', upload);\r\n  // console.log('type', type);\r\n\r\n  const renderFile = (address, type) => {\r\n    if (address) return <div dangerouslySetInnerHTML={{ __html: address }} />;\r\n    if (type) {\r\n      switch (type) {\r\n        case 'video/mp4':\r\n        case 'video/quicktime':\r\n          return (\r\n            <video controls>\r\n              <source\r\n                src={`data:image/png;base64, ${upload}`}\r\n                type=\"video/mp4\"\r\n              />\r\n              <source\r\n                src={`data:image/png;base64, ${upload}`}\r\n                type=\"video/ogg\"\r\n              />\r\n              Your browser does not support the video tag.\r\n            </video>\r\n          );\r\n        case 'image/*':\r\n          return (\r\n            <img\r\n              className=\"img-thumbnail img-fluid\"\r\n              src={`data:image/png;base64, ${upload}`}\r\n            />\r\n          );\r\n        default:\r\n          return (\r\n            <img\r\n              className=\"img-thumbnail img-fluid\"\r\n              src={`data:image/png;base64, ${upload}`}\r\n            />\r\n          );\r\n      }\r\n    }\r\n    return (\r\n      <p className=\"chat-message__body--text\">{ReactEmoji.emojify(text)}</p>\r\n    );\r\n  };\r\n  return (\r\n    <div className={`chat-message chat-message--${role}`}>\r\n      {role === 'friend' && (\r\n        <h4>\r\n          {avatarSrc ? (\r\n            <Image src={avatarSrc} roundedCircle />\r\n          ) : (\r\n            <PersonCircle size={24} />\r\n          )}\r\n          <span>{title}</span>\r\n        </h4>\r\n      )}\r\n      <div className=\"chat-message__body\">{renderFile(address, type)}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import React from 'react';\r\nimport ScrollToBottom from 'react-scroll-to-bottom';\r\nimport Message from '../Message';\r\nimport './index.scss';\r\n\r\nconst Messages = ({ messages, name }) => (\r\n  <ScrollToBottom className=\"chat__messages\">\r\n    {messages.map((message, index) => {\r\n      return <Message key={`name-${index}`} message={message} name={name} />;\r\n    })}\r\n  </ScrollToBottom>\r\n);\r\n\r\nexport default React.memo(Messages);\r\n","import ss from 'socket.io-stream';\r\n\r\n/*\r\n  以下縮小檔案\r\n  三個引數\r\n  file：一個是檔案(型別是圖片格式)，\r\n  w：一個是檔案壓縮的後寬度，寬度越小，位元組越小\r\n  objDiv：一個是容器或者回調函式\r\n  photoCompress()\r\n*/\r\n\r\nclass FileProcessor {\r\n  constructor(file, socket, callback) {\r\n    this.socket = socket;\r\n    this.file = file;\r\n    this.name = file.name;\r\n  }\r\n  static process(file, socket) {\r\n    const config = {\r\n      name: file.name,\r\n      quality: 0.6,\r\n    };\r\n    return convertToDataUrl(file, config)\r\n      .then(({ readerData, config, callback }) => {\r\n        this.base64 = readerData;\r\n        return minifiedDataURL(readerData, config, callback);\r\n      })\r\n      .then(({ base64, config, callback }) => {\r\n        this.minifiedBase64 = base64;\r\n        return dataURLtoFile(base64, config, callback);\r\n      })\r\n      .then((minifiedFile) => {\r\n        this.minifiedFile = minifiedFile;\r\n        return new FileProcessor(this.minifiedFile, socket);\r\n      });\r\n  }\r\n  send() {\r\n    const stream = ss.createStream();\r\n    ss(this.socket).emit('sendFile', stream, {\r\n      name: this.file.name,\r\n      type: this.file.type,\r\n      size: this.file.size,\r\n    });\r\n    const blobStream = ss.createBlobReadStream(this.file); //for browser use, 本來寫法是什麼\r\n    // let size = 0;\r\n    // blobStream.on('data', function(chunk) {\r\n    //   size += chunk.length;\r\n    //   console.log(Math.floor((size / file.size) * 100) + '%');\r\n    // });\r\n    blobStream.pipe(stream);\r\n  }\r\n  upload() {\r\n    const stream = ss.createStream();\r\n    ss(this.socket).emit('uploadFile', stream, {\r\n      name: this.file.name,\r\n      type: this.file.type,\r\n      size: this.file.size,\r\n    });\r\n    const blobStream = ss.createBlobReadStream(this.file); //for browser use, 本來寫法是什麼\r\n    // let size = 0;\r\n    // blobStream.on('data', function(chunk) {\r\n    //   size += chunk.length;\r\n    //   console.log(Math.floor((size / file.size) * 100) + '%');\r\n    // });\r\n    blobStream.pipe(stream);\r\n  }\r\n}\r\n\r\nconst convertToDataUrl = (file, config, callback) => {\r\n  console.log('開始', file); //注意必包\r\n  return new Promise((resolve) => {\r\n    // 王牌文件 https://kknews.cc/zh-tw/code/e6p2ygq.html\r\n    // 神文 https://codertw.com/%E5%89%8D%E7%AB%AF%E9%96%8B%E7%99%BC/227679/\r\n    /* 使用FileReader對象分三步走： 一 創建FileReader實例 */\r\n    var reader = new FileReader();\r\n    /* 開始讀取指定的Blob物件或File物件中的內容. 當讀取操作完成時,readyState屬性的值會成為DONE,\r\n    如果設定了onloadend事件處理程式,則呼叫之.\r\n    同時,result屬性中將包含一個data: URL格式的字串以表示所讀取檔案的內容.\r\n  */\r\n\r\n    /* 讀取Blob或者File對象的數據內容 */\r\n    reader.readAsDataURL(file); // 讀取文件內容，結果用data:url的字符串形式表示\r\n\r\n    // reader.onloadstart = function() {\r\n    //   console.log('加載已經開始');\r\n    // };\r\n    // reader.onprogress = function(what) {\r\n    //   console.log('啥', what); //注意必包\r\n    // };\r\n    /** 設置回調函數，這裡以讀取成功的回調函數為例： */\r\n    reader.onload = function () {\r\n      const readerData = this.result;\r\n      resolve({ readerData, config, callback });\r\n    };\r\n    reader.onloadend = function () {\r\n      console.log('加載已經結束');\r\n    };\r\n  });\r\n};\r\n\r\nconst minifiedDataURL = (readerData, config, callback) => {\r\n  return new Promise((resolve) => {\r\n    let img = new Image();\r\n    img.src = readerData;\r\n    img.onload = () => {\r\n      // var that = this;\r\n      // 預設按比例壓縮\r\n      let width = img.width,\r\n        height = img.height,\r\n        scale = width / height;\r\n      const resizedWidth = 400;\r\n      let resizedHeight = resizedWidth / scale;\r\n      let quality = 0.7; // 預設圖片質量為0.7\r\n      //生成canvas\r\n      // 關鍵字\r\n      let canvas = document.createElement('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n      // 建立屬性節點\r\n      const anw = document.createAttribute('width');\r\n      anw.nodeValue = resizedWidth;\r\n      const anh = document.createAttribute('height');\r\n      anh.nodeValue = resizedHeight;\r\n      canvas.setAttributeNode(anw);\r\n      canvas.setAttributeNode(anh);\r\n      ctx.drawImage(img, 0, 0, resizedWidth, resizedHeight);\r\n      // 影象質量\r\n      if (config.quality && config.quality <= 1 && config.quality > 0) {\r\n        quality = config.quality;\r\n      }\r\n      /*\r\n    我們只需要把<img>獲取到的圖片放到<canvas>裡再通過.toDataURL()方法轉化下，\r\n    就可以得到以 base64 編碼的 dataURL。來看這個方法的語法： \r\n    */\r\n      var base64 = canvas.toDataURL('image/jpeg', 'image/webp', quality);\r\n      resolve({ base64, config, callback });\r\n      // const resizedFile = dataURLtoFile(base64);\r\n      // console.log('resizedFile', resizedFile);\r\n      // // 回撥函式返回base64的值\r\n      // callback(resizedFile); // 非同步onload只能回用回掉函數\r\n    };\r\n  });\r\n};\r\n\r\nconst dataURLtoFile = (base64, config) => {\r\n  //return dataURLtoFile(base64, config, callback);\r\n\r\n  var arr = base64.split(','),\r\n    mime = arr[0].match(/:(.*?);/)[1],\r\n    bstr = atob(arr[1]),\r\n    n = bstr.length,\r\n    u8arr = new Uint8Array(n);\r\n\r\n  while (n--) {\r\n    u8arr[n] = bstr.charCodeAt(n);\r\n  }\r\n  return new File([u8arr], config.name, { type: mime });\r\n};\r\n/*\r\nconst emitFileToServer = (socket, file, action) => {\r\n  const stream = ss.createStream();\r\n  console.log(\"file\", file);\r\n  console.log(\"action\", action);\r\n\r\n  if (action === \"send\") {\r\n    ss(socket).emit(\"sendFile\", stream, {\r\n      name: file.name,\r\n      type: file.type,\r\n      size: file.size\r\n    });\r\n  }\r\n  if (action === \"upload\") {\r\n    ss(socket).emit(\"uploadFile\", stream, {\r\n      name: file.name,\r\n      type: file.type,\r\n      size: file.size\r\n    });\r\n  }\r\n  const blobStream = ss.createBlobReadStream(file); //for browser use, 本來寫法是什麼\r\n  let size = 0;\r\n  // blobStream.on('data', function(chunk) {\r\n  //   size += chunk.length;\r\n  //   console.log(Math.floor((size / file.size) * 100) + '%');\r\n  // });\r\n  blobStream.pipe(stream);\r\n};\r\n*/\r\nexport default FileProcessor;\r\n","import React from 'react';\r\n// import PropTypes from 'prop-types';\r\nimport { Toast } from 'react-bootstrap';\r\nimport { Portal } from 'react-portal';\r\nimport './index.scss';\r\n// import useMediaQuery from '../../util/useMediaQuery';\r\n\r\nconst Box = ({\r\n  title,\r\n  content,\r\n  control,\r\n  // setHasNotification,\r\n  hasNotification,\r\n  notificationContent,\r\n}) => {\r\n  // const mediaQuery = useMediaQuery();\r\n  const portalDom = (\r\n    <Portal node={document && document.getElementById('portal')}>\r\n      <Toast delay={3000} autohide>\r\n        <Toast.Header>\r\n          <strong className=\"mr-auto\">FAILURE</strong>\r\n        </Toast.Header>\r\n        <Toast.Body>{notificationContent}</Toast.Body>\r\n      </Toast>\r\n    </Portal>\r\n  );\r\n  return (\r\n    <div className=\"chat__box\">\r\n      <h1>{title}</h1>\r\n      {content}\r\n      <div>{control}</div>\r\n      {hasNotification && portalDom}\r\n    </div>\r\n  );\r\n};\r\n\r\nBox.defaultProps = {\r\n  setHasNotification: () => {},\r\n  hasNotification: false,\r\n};\r\n\r\nexport default Box;\r\n","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Box from '../Box';\r\nimport { Button, Form } from 'react-bootstrap';\r\nimport './index.scss';\r\n\r\nconst Join = () => {\r\n  const [name, setName] = useState('');\r\n  const [room, setRoom] = useState('');\r\n  return (\r\n    <Box\r\n      title=\"Join\"\r\n      content={\r\n        <Form>\r\n          <Form.Group controlId=\"formBasicPassword\">\r\n            <Form.Label>Username</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              placeholder=\"Username\"\r\n              onChange={(e) => setName(e.target.value)}\r\n            />\r\n            <Form.Label>Room</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              placeholder=\"Room\"\r\n              onChange={(e) => setRoom(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n        </Form>\r\n      }\r\n      control={\r\n        <Link\r\n          onClick={(event) => (!name || !room ? event.preventDefault() : null)}\r\n          to={`/chat?name=${name}&room=${room}`}\r\n        >\r\n          <Button block type=\"submit\">\r\n            Join In\r\n          </Button>\r\n        </Link>\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default Join;\r\n","import axios from 'axios';\r\n\r\nconst API_URL = 'https://freshtalk.herokuapp.com/api/auth/';\r\nclass AuthService {\r\n  login(username, password) {\r\n    return axios\r\n      .post(API_URL + 'signin', {\r\n        username,\r\n        password,\r\n      })\r\n      .then((response) => {\r\n        if (response.data.accessToken) {\r\n          localStorage.setItem('user', JSON.stringify(response.data));\r\n        }\r\n\r\n        return response.data;\r\n      });\r\n  }\r\n\r\n  logout() {\r\n    localStorage.removeItem('user');\r\n  }\r\n\r\n  signup(username, email, password) {\r\n    return axios.post(API_URL + 'signup', {\r\n      username,\r\n      email,\r\n      password,\r\n    });\r\n  }\r\n\r\n  getCurrentUser() {\r\n    return JSON.parse(localStorage.getItem('user'));\r\n  }\r\n}\r\n\r\nexport default new AuthService();\r\n","import React, { useState } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Form, Button } from 'react-bootstrap';\r\n\r\nimport Box from '../Box';\r\nimport AuthService from '../../util/auth';\r\nimport './index.scss';\r\n\r\nconst Login = (props) => {\r\n  const [redirectToReferrer, setRedirectToReferrer] = useState(false);\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [hasError, setHasError] = useState(false);\r\n\r\n  const login = (e) => {\r\n    e.preventDefault();\r\n    AuthService.login(username, password)\r\n      .then((response) => {\r\n        // 以驗證mongodb data以及設定localstorage\r\n        console.log('資料', response);\r\n        setRedirectToReferrer(true);\r\n      })\r\n      .catch((error) => {\r\n        console.log('catch', error);\r\n        setHasError(true);\r\n      });\r\n  };\r\n  // const { from } = props.location.state || { from: { pathname: '/' } };\r\n  if (redirectToReferrer === true) {\r\n    return <Redirect to=\"join\" />;\r\n  }\r\n  const handleNameChange = (e) => {\r\n    setUsername(e.target.value);\r\n  };\r\n  const handlePasswordChange = (e) => {\r\n    setPassword(e.target.value);\r\n  };\r\n  return (\r\n    <>\r\n      <Box\r\n        title=\"Login\"\r\n        content={\r\n          <Form>\r\n            <Form.Control\r\n              type=\"text\"\r\n              placeholder=\"Username\"\r\n              onChange={handleNameChange}\r\n            />\r\n            <Form.Group controlId=\"formBasicPassword\">\r\n              <Form.Label>Password</Form.Label>\r\n              <Form.Control\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                onChange={handlePasswordChange}\r\n              />\r\n            </Form.Group>\r\n          </Form>\r\n        }\r\n        control={\r\n          <Button onClick={login} variant=\"primary\" type=\"submit\">\r\n            Submit\r\n          </Button>\r\n        }\r\n        // setHasNotification={setHasError}\r\n        hasNotification={hasError}\r\n        notificationContent=\"Oops, something went wrong!\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Form, Button } from 'react-bootstrap';\r\nimport Box from '../Box';\r\nimport axios from 'axios';\r\nimport './index.scss';\r\n\r\nconst Signup = (props) => {\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [hasSignup, setHasSignup] = useState(false);\r\n  const [hasError, setHasError] = useState(false);\r\n\r\n  const signup = (e) => {\r\n    e.preventDefault();\r\n    axios\r\n      .post('/api/auth/signup', {\r\n        username,\r\n        email,\r\n        password,\r\n        roles: ['user'],\r\n      })\r\n      .then((response) => {\r\n        setHasSignup(true);\r\n      })\r\n      .catch((error) => {\r\n        console.log('catch', error);\r\n        setHasError(true);\r\n      });\r\n  };\r\n  const handleNameChange = (e) => {\r\n    setUsername(e.target.value);\r\n  };\r\n  const handleEmailChange = (e) => {\r\n    setEmail(e.target.value);\r\n  };\r\n  const handlePasswordChange = (e) => {\r\n    setPassword(e.target.value);\r\n  };\r\n  if (hasSignup) return <Redirect to=\"login\" />;\r\n  return (\r\n    <Box\r\n      title=\"Sign Up\"\r\n      content={\r\n        <Form>\r\n          <Form.Control\r\n            type=\"text\"\r\n            placeholder=\"Normal text\"\r\n            onChange={handleNameChange}\r\n            value={username}\r\n          />\r\n          <Form.Group controlId=\"formBasicEmail\">\r\n            <Form.Label>Email address</Form.Label>\r\n            <Form.Control\r\n              type=\"email\"\r\n              placeholder=\"Enter email\"\r\n              onChange={handleEmailChange}\r\n              value={email}\r\n            />\r\n            <Form.Text className=\"text-muted\">\r\n              We'll never share your email with anyone else.\r\n            </Form.Text>\r\n          </Form.Group>\r\n          <Form.Group controlId=\"formBasicPassword\">\r\n            <Form.Label>Password</Form.Label>\r\n            <Form.Control\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              onChange={handlePasswordChange}\r\n              value={password}\r\n            />\r\n          </Form.Group>\r\n        </Form>\r\n      }\r\n      control={\r\n        <Button onClick={signup} variant=\"primary\" type=\"submit\">\r\n          Sign Up\r\n        </Button>\r\n      }\r\n      setHasNotification={setHasError}\r\n      hasNotification={hasError}\r\n      notificationContent=\"Oops, something went wrong!\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default Signup;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport AuthService from '../../util/auth';\r\nimport './index.scss';\r\n\r\nconst Home = () => (\r\n  <div className=\"chat-home\">\r\n    <h1>Fresh Talk</h1>\r\n    <div className=\"chat-home__controls\">\r\n      <Link to=\"/signup\">Sign up</Link>\r\n      {AuthService.getCurrentUser() ? (\r\n        <Link to=\"/join\">Join</Link>\r\n      ) : (\r\n        <Link to=\"/login\">Login</Link>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default Home;\r\n","import React from 'react';\r\n// import { Link } from 'react-router-dom';\r\n// import { Jumbotron } from 'react-bootstrap';\r\n// import { ArrowLeftCircle, PeopleFill } from 'react-bootstrap-icons';\r\nimport './index.scss';\r\n\r\nconst Head = ({ children }) => (\r\n  <section className=\"chat__head\">{children}</section>\r\n);\r\n\r\nexport default Head;\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport AuthService from '../../util/auth';\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={(props) =>\r\n      AuthService.getCurrentUser() ? (\r\n        <Component {...props} />\r\n      ) : (\r\n        <Redirect\r\n          to={{\r\n            pathname: '/login',\r\n            state: { from: props.location },\r\n          }}\r\n        />\r\n      )\r\n    }\r\n  />\r\n);\r\n\r\nexport default PrivateRoute;\r\n","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\n// import { Button } from 'react-bootstrap';\r\nimport { BoxArrowLeft } from 'react-bootstrap-icons';\r\nimport './index.scss';\r\nimport AuthService from '../../util/auth';\r\n\r\n/**\r\n * withRouter will pass updated match, location,\r\n * and history props to the wrapped component whenever it renders.\r\n */\r\nconst AuthButton = withRouter(\r\n  ({ history }) =>\r\n    AuthService.getCurrentUser() && (\r\n      <BoxArrowLeft\r\n        size=\"30\"\r\n        color=\"#fff\"\r\n        onClick={() => {\r\n          AuthService.logout();\r\n          history.push('/');\r\n        }}\r\n      >\r\n        Sign out\r\n      </BoxArrowLeft>\r\n    )\r\n);\r\n\r\nexport default AuthButton;\r\n","import React from 'react';\r\n// import { Toast } from 'react-bootstrap';\r\n\r\nimport {\r\n  BrowserRouter as Router,\r\n  // Link,\r\n  Route,\r\n  Redirect,\r\n  Switch,\r\n  // withRouter,\r\n} from 'react-router-dom';\r\n\r\nimport {\r\n  Home,\r\n  Head,\r\n  Login,\r\n  Signup,\r\n  AuthButton,\r\n  Join,\r\n  Chat,\r\n  PrivateRoute,\r\n} from './components';\r\nimport './index.scss';\r\n// const NotFound = () => (\r\n//   <div>\r\n//     <p>The page does not exist</p>\r\n//   </div>\r\n// );\r\nconst App = () => (\r\n  <Router>\r\n    <Head>\r\n      <AuthButton />\r\n    </Head>\r\n    <Switch>\r\n      <Route path=\"/\" exact component={Home} />\r\n      <Route path=\"/Signup\" component={Signup} />\r\n      <Route path=\"/login\" component={Login} />\r\n      <PrivateRoute path=\"/join\" component={Join} />\r\n      <PrivateRoute path=\"/chat\" component={Chat} />\r\n      <Redirect from=\"*\" to=\"/\" />\r\n    </Switch>\r\n    <div id=\"portal\"></div>\r\n  </Router>\r\n);\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDom from 'react-dom';\r\nimport App from './App.js';\r\n\r\nReactDom.render(<App />, document.querySelector('#root'));\r\n"],"sourceRoot":""}